---
id: SocialBet
title: SocialBet
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> SocialBet</h2><div class="source">Source: <a href="git+https://github.com/Andy92Pac/bet-ethereum/blob/v1.0.0/contracts/SocialBet.sol" target="_blank">SocialBet.sol</a></div></div><div class="index"><h2>Index</h2><ul><li><a href="SocialBet.html#LogBalanceChange">LogBalanceChange</a></li><li><a href="SocialBet.html#LogBetClosed">LogBetClosed</a></li><li><a href="SocialBet.html#LogCancelEvent">LogCancelEvent</a></li><li><a href="SocialBet.html#LogDeposit">LogDeposit</a></li><li><a href="SocialBet.html#LogNewBet">LogNewBet</a></li><li><a href="SocialBet.html#LogNewEvents">LogNewEvents</a></li><li><a href="SocialBet.html#LogNewOffer">LogNewOffer</a></li><li><a href="SocialBet.html#LogNewPosition">LogNewPosition</a></li><li><a href="SocialBet.html#LogOfferClosed">LogOfferClosed</a></li><li><a href="SocialBet.html#LogResultsEvent">LogResultsEvent</a></li><li><a href="SocialBet.html#LogUpdateOffer">LogUpdateOffer</a></li><li><a href="SocialBet.html#LogUpdatePosition">LogUpdatePosition</a></li><li><a href="SocialBet.html#LogWithdraw">LogWithdraw</a></li><li><a href="SocialBet.html#_addEvent">_addEvent</a></li><li><a href="SocialBet.html#add">add</a></li><li><a href="SocialBet.html#addAdmin">addAdmin</a></li><li><a href="SocialBet.html#addEventBulk">addEventBulk</a></li><li><a href="SocialBet.html#buyOffer">buyOffer</a></li><li><a href="SocialBet.html#buyOfferBulk">buyOfferBulk</a></li><li><a href="SocialBet.html#buyPosition">buyPosition</a></li><li><a href="SocialBet.html#cancelEventBulk">cancelEventBulk</a></li><li><a href="SocialBet.html#claimBetEarnings">claimBetEarnings</a></li><li><a href="SocialBet.html#claimFees">claimFees</a></li><li><a href="SocialBet.html#closeOffer">closeOffer</a></li><li><a href="SocialBet.html#deposit">deposit</a></li><li><a href="SocialBet.html#div">div</a></li><li><a href="SocialBet.html#eventAvailable">eventAvailable</a></li><li><a href="SocialBet.html#">fallback</a></li><li><a href="SocialBet.html#isAdmin">isAdmin</a></li><li><a href="SocialBet.html#isOwner">isOwner</a></li><li><a href="SocialBet.html#mul">mul</a></li><li><a href="SocialBet.html#offerAvailable">offerAvailable</a></li><li><a href="SocialBet.html#openOffer">openOffer</a></li><li><a href="SocialBet.html#pickValid">pickValid</a></li><li><a href="SocialBet.html#removeAdmin">removeAdmin</a></li><li><a href="SocialBet.html#setEventResultBulk">setEventResultBulk</a></li><li><a href="SocialBet.html#sub">sub</a></li><li><a href="SocialBet.html#updateOffer">updateOffer</a></li><li><a href="SocialBet.html#updatePosition">updatePosition</a></li><li><a href="SocialBet.html#withdraw">withdraw</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="events"><h3>Events</h3><ul><li><div class="item event"><span id="LogBalanceChange" class="anchor-marker"></span><h4 class="name">LogBalanceChange</h4><div class="body"><code class="signature">event <strong>LogBalanceChange</strong><span>(address account, uint oldBalance, uint newBalance) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>account</code> - address</div><div><code>oldBalance</code> - uint</div><div><code>newBalance</code> - uint</div></dd></dl></div></div></li><li><div class="item event"><span id="LogBetClosed" class="anchor-marker"></span><h4 class="name">LogBetClosed</h4><div class="body"><code class="signature">event <strong>LogBetClosed</strong><span>(uint id) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - uint</div></dd></dl></div></div></li><li><div class="item event"><span id="LogCancelEvent" class="anchor-marker"></span><h4 class="name">LogCancelEvent</h4><div class="body"><code class="signature">event <strong>LogCancelEvent</strong><span>(uint[] id) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - uint[]</div></dd></dl></div></div></li><li><div class="item event"><span id="LogDeposit" class="anchor-marker"></span><h4 class="name">LogDeposit</h4><div class="body"><code class="signature">event <strong>LogDeposit</strong><span>(address account, uint amount) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>account</code> - address</div><div><code>amount</code> - uint</div></dd></dl></div></div></li><li><div class="item event"><span id="LogNewBet" class="anchor-marker"></span><h4 class="name">LogNewBet</h4><div class="body"><code class="signature">event <strong>LogNewBet</strong><span>(uint id, uint eventId, uint[] positions, uint pick) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - uint</div><div><code>eventId</code> - uint</div><div><code>positions</code> - uint[]</div><div><code>pick</code> - uint</div></dd></dl></div></div></li><li><div class="item event"><span id="LogNewEvents" class="anchor-marker"></span><h4 class="name">LogNewEvents</h4><div class="body"><code class="signature">event <strong>LogNewEvents</strong><span>(uint[] id, bytes32[] ipfsAddress) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - uint[]</div><div><code>ipfsAddress</code> - bytes32[]</div></dd></dl></div></div></li><li><div class="item event"><span id="LogNewOffer" class="anchor-marker"></span><h4 class="name">LogNewOffer</h4><div class="body"><code class="signature">event <strong>LogNewOffer</strong><span>(uint id, uint eventId, address owner, uint amount, uint price, uint pick) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - uint</div><div><code>eventId</code> - uint</div><div><code>owner</code> - address</div><div><code>amount</code> - uint</div><div><code>price</code> - uint</div><div><code>pick</code> - uint</div></dd></dl></div></div></li><li><div class="item event"><span id="LogNewPosition" class="anchor-marker"></span><h4 class="name">LogNewPosition</h4><div class="body"><code class="signature">event <strong>LogNewPosition</strong><span>(uint id, uint betId, address owner, uint amount, uint amountToEarn, uint price, uint role) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - uint</div><div><code>betId</code> - uint</div><div><code>owner</code> - address</div><div><code>amount</code> - uint</div><div><code>amountToEarn</code> - uint</div><div><code>price</code> - uint</div><div><code>role</code> - uint</div></dd></dl></div></div></li><li><div class="item event"><span id="LogOfferClosed" class="anchor-marker"></span><h4 class="name">LogOfferClosed</h4><div class="body"><code class="signature">event <strong>LogOfferClosed</strong><span>(uint id, address owner) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - uint</div><div><code>owner</code> - address</div></dd></dl></div></div></li><li><div class="item event"><span id="LogResultsEvent" class="anchor-marker"></span><h4 class="name">LogResultsEvent</h4><div class="body"><code class="signature">event <strong>LogResultsEvent</strong><span>(uint[] id, uint[] result) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - uint[]</div><div><code>result</code> - uint[]</div></dd></dl></div></div></li><li><div class="item event"><span id="LogUpdateOffer" class="anchor-marker"></span><h4 class="name">LogUpdateOffer</h4><div class="body"><code class="signature">event <strong>LogUpdateOffer</strong><span>(uint id, address owner, uint amount, uint price) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - uint</div><div><code>owner</code> - address</div><div><code>amount</code> - uint</div><div><code>price</code> - uint</div></dd></dl></div></div></li><li><div class="item event"><span id="LogUpdatePosition" class="anchor-marker"></span><h4 class="name">LogUpdatePosition</h4><div class="body"><code class="signature">event <strong>LogUpdatePosition</strong><span>(uint id, address owner, uint amount, uint amountToEarn, uint price) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - uint</div><div><code>owner</code> - address</div><div><code>amount</code> - uint</div><div><code>amountToEarn</code> - uint</div><div><code>price</code> - uint</div></dd></dl></div></div></li><li><div class="item event"><span id="LogWithdraw" class="anchor-marker"></span><h4 class="name">LogWithdraw</h4><div class="body"><code class="signature">event <strong>LogWithdraw</strong><span>(address account, uint amount) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>account</code> - address</div><div><code>amount</code> - uint</div></dd></dl></div></div></li></ul></div><div class="modifiers"><h3>Modifiers</h3><ul><li><div class="item modifier"><span id="eventAvailable" class="anchor-marker"></span><h4 class="name">eventAvailable</h4><div class="body"><code class="signature">modifier <strong>eventAvailable</strong><span>(uint _eventId) </span></code><hr/><div class="description"><p>Check that the event exists, is still open and has not started.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_eventId</code> - uint</div></dd></dl></div></div></li><li><div class="item modifier"><span id="isAdmin" class="anchor-marker"></span><h4 class="name">isAdmin</h4><div class="body"><code class="signature">modifier <strong>isAdmin</strong><span>() </span></code><hr/><div class="description"><p>Check that the caller have admin rights.</p></div></div></div></li><li><div class="item modifier"><span id="isOwner" class="anchor-marker"></span><h4 class="name">isOwner</h4><div class="body"><code class="signature">modifier <strong>isOwner</strong><span>() </span></code><hr/><div class="description"><p>Check that the caller is the Owner of the smart contract.</p></div></div></div></li><li><div class="item modifier"><span id="offerAvailable" class="anchor-marker"></span><h4 class="name">offerAvailable</h4><div class="body"><code class="signature">modifier <strong>offerAvailable</strong><span>(uint _offerId) </span></code><hr/><div class="description"><p>Check that the offer exists and is still open.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_offerId</code> - uint</div></dd></dl></div></div></li><li><div class="item modifier"><span id="pickValid" class="anchor-marker"></span><h4 class="name">pickValid</h4><div class="body"><code class="signature">modifier <strong>pickValid</strong><span>(uint _eventId, uint _pick) </span></code><hr/><div class="description"><p>Check that the selected pick is valid for the type of the selected event (DRAW is not possible for a HOMEAWAY event).</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_eventId</code> - uint</div><div><code>_pick</code> - uint</div></dd></dl></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="_addEvent" class="anchor-marker"></span><h4 class="name">_addEvent</h4><div class="body"><code class="signature">function <strong>_addEvent</strong><span>(uint _type, bytes32 _ipfsAddress, uint _timestampStart) </span><span>internal </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Add event.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_type</code> - Type of the event</div><div><code>_ipfsAddress</code> - Hash of the JSON containing event details</div><div><code>_timestampStart</code> - Start timestamp of the event</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint</dd></dl></div></div></li><li><div class="item function"><span id="add" class="anchor-marker"></span><h4 class="name">add</h4><div class="body"><code class="signature">function <strong>add</strong><span>(uint256 _a, uint256 _b) </span><span>internal </span><span>pure </span><span>returns  (uint256) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_a</code> - uint256</div><div><code>_b</code> - uint256</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="addAdmin" class="anchor-marker"></span><h4 class="name">addAdmin</h4><div class="body"><code class="signature">function <strong>addAdmin</strong><span>(address _addr) </span><span>public </span></code><hr/><div class="description"><p>The value in the admins mapping is set to true at the passed address key, Add passed address as an admin.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="SocialBet.html#isOwner">isOwner </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_addr</code> - The address to set as an admin</div></dd></dl></div></div></li><li><div class="item function"><span id="addEventBulk" class="anchor-marker"></span><h4 class="name">addEventBulk</h4><div class="body"><code class="signature">function <strong>addEventBulk</strong><span>(uint[] _typeArr, bytes32[] _ipfsAddressArr, uint[] _timestampStartArr) </span><span>external </span></code><hr/><div class="description"><p>Bulk add new events to smart contract. The details of the event are found in the ipfs address passed.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="SocialBet.html#isAdmin">isAdmin </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_typeArr</code> - Array of the types of the saved events</div><div><code>_ipfsAddressArr</code> - Array of the hash of the JSONs containing details of the saved events</div><div><code>_timestampStartArr</code> - Array of the start timestamp of the saved events</div></dd></dl></div></div></li><li><div class="item function"><span id="buyOffer" class="anchor-marker"></span><h4 class="name">buyOffer</h4><div class="body"><code class="signature">function <strong>buyOffer</strong><span>(uint _offerId, uint _amount) </span><span>public </span></code><hr/><div class="description"><p>Fully or partly buy an offer and open a bet according to the parameters.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="SocialBet.html#offerAvailable">offerAvailable </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_offerId</code> - Id of the offer to buy</div><div><code>_amount</code> - Amount the bettor wants to buy the offer with</div></dd></dl></div></div></li><li><div class="item function"><span id="buyOfferBulk" class="anchor-marker"></span><h4 class="name">buyOfferBulk</h4><div class="body"><code class="signature">function <strong>buyOfferBulk</strong><span>(uint[] _offerIds, uint _amount) </span><span>external </span></code><hr/><div class="description"><p>Fully or partly buy multiple offers and open bets according to the parameters.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_offerIds</code> - Ids of the offers to buy</div><div><code>_amount</code> - Amount the bettor wants to buy the offers with</div></dd></dl></div></div></li><li><div class="item function"><span id="buyPosition" class="anchor-marker"></span><h4 class="name">buyPosition</h4><div class="body"><code class="signature">function <strong>buyPosition</strong><span>(uint _positionId, uint _amount) </span><span>external </span></code><hr/><div class="description"><p>Fully or partly buy a position and create a new position in the associated bet.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_positionId</code> - Id of the position the user wants to buy</div><div><code>_amount</code> - Amount the user wants to buy the position with</div></dd></dl></div></div></li><li><div class="item function"><span id="cancelEventBulk" class="anchor-marker"></span><h4 class="name">cancelEventBulk</h4><div class="body"><code class="signature">function <strong>cancelEventBulk</strong><span>(uint[] _eventIdArr) </span><span>external </span></code><hr/><div class="description"><p>Bulk cancel of events.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="SocialBet.html#isAdmin">isAdmin </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_eventIdArr</code> - Array of the id of the events to cancel</div></dd></dl></div></div></li><li><div class="item function"><span id="claimBetEarnings" class="anchor-marker"></span><h4 class="name">claimBetEarnings</h4><div class="body"><code class="signature">function <strong>claimBetEarnings</strong><span>(uint _betId) </span><span>external </span></code><hr/><div class="description"><p>Claim bet earnings of a bet open on a close event.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_betId</code> - Id of the bet to claim from</div></dd></dl></div></div></li><li><div class="item function"><span id="claimFees" class="anchor-marker"></span><h4 class="name">claimFees</h4><div class="body"><code class="signature">function <strong>claimFees</strong><span>() </span><span>external </span></code><hr/><div class="description"><p>Send the amount of fees collected to the owner address.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="SocialBet.html#isOwner">isOwner </a></dd></dl></div></div></li><li><div class="item function"><span id="closeOffer" class="anchor-marker"></span><h4 class="name">closeOffer</h4><div class="body"><code class="signature">function <strong>closeOffer</strong><span>(uint _offerId) </span><span>external </span></code><hr/><div class="description"><p>Close an existing offer.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="SocialBet.html#offerAvailable">offerAvailable </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_offerId</code> - Id of the offer to close</div></dd></dl></div></div></li><li><div class="item function"><span id="deposit" class="anchor-marker"></span><h4 class="name">deposit</h4><div class="body"><code class="signature">function <strong>deposit</strong><span>() </span><span>external </span><span>payable </span></code><hr/><div class="description"><p>Deposit.</p></div></div></div></li><li><div class="item function"><span id="div" class="anchor-marker"></span><h4 class="name">div</h4><div class="body"><code class="signature">function <strong>div</strong><span>(uint256 _a, uint256 _b) </span><span>internal </span><span>pure </span><span>returns  (uint256) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_a</code> - uint256</div><div><code>_b</code> - uint256</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="fallback" class="anchor-marker"></span><h4 class="name">fallback</h4><div class="body"><code class="signature">function <strong></strong><span>() </span><span>public </span></code><hr/><div class="description"><p>The owner variable is set to the address of the caller of the constructor and the address is set as an admin, Create SocialBet smart contract.</p></div></div></div></li><li><div class="item function"><span id="mul" class="anchor-marker"></span><h4 class="name">mul</h4><div class="body"><code class="signature">function <strong>mul</strong><span>(uint256 _a, uint256 _b) </span><span>internal </span><span>pure </span><span>returns  (uint256) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_a</code> - uint256</div><div><code>_b</code> - uint256</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="openOffer" class="anchor-marker"></span><h4 class="name">openOffer</h4><div class="body"><code class="signature">function <strong>openOffer</strong><span>(uint _eventId, uint _amount, uint _price, uint _pick) </span><span>external </span></code><hr/><div class="description"><p>Open a new offer on the selected event with the parameters passed as arguments.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="SocialBet.html#eventAvailable">eventAvailable </a><a href="SocialBet.html#pickValid">pickValid </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_eventId</code> - Id of the event the offer is created on</div><div><code>_amount</code> - Amount the bookmaker is putting on the offer</div><div><code>_price</code> - Price the bookmaker is selling the offer for</div><div><code>_pick</code> - Pick of the event the bookmaker is opening the offer on</div></dd></dl></div></div></li><li><div class="item function"><span id="removeAdmin" class="anchor-marker"></span><h4 class="name">removeAdmin</h4><div class="body"><code class="signature">function <strong>removeAdmin</strong><span>(address _addr) </span><span>external </span></code><hr/><div class="description"><p>The value in the admins mapping is set to false at the passed address key, Remove passed address from admins.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="SocialBet.html#isOwner">isOwner </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_addr</code> - The address to unset from admins</div></dd></dl></div></div></li><li><div class="item function"><span id="setEventResultBulk" class="anchor-marker"></span><h4 class="name">setEventResultBulk</h4><div class="body"><code class="signature">function <strong>setEventResultBulk</strong><span>(uint[] _eventIdArr, uint[] _resultArr) </span><span>external </span></code><hr/><div class="description"><p>Bulk set events result.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="SocialBet.html#isAdmin">isAdmin </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_eventIdArr</code> - Array of the id of the events to set result to</div><div><code>_resultArr</code> - Array of the results to set</div></dd></dl></div></div></li><li><div class="item function"><span id="sub" class="anchor-marker"></span><h4 class="name">sub</h4><div class="body"><code class="signature">function <strong>sub</strong><span>(uint256 _a, uint256 _b) </span><span>internal </span><span>pure </span><span>returns  (uint256) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_a</code> - uint256</div><div><code>_b</code> - uint256</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint256</dd></dl></div></div></li><li><div class="item function"><span id="updateOffer" class="anchor-marker"></span><h4 class="name">updateOffer</h4><div class="body"><code class="signature">function <strong>updateOffer</strong><span>(uint _offerId, uint _price) </span><span>external </span></code><hr/><div class="description"><p>Update the price of an existing offer.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="SocialBet.html#offerAvailable">offerAvailable </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_offerId</code> - Id of the offer to update</div><div><code>_price</code> - Price the bookmaker wants to update the offer to</div></dd></dl></div></div></li><li><div class="item function"><span id="updatePosition" class="anchor-marker"></span><h4 class="name">updatePosition</h4><div class="body"><code class="signature">function <strong>updatePosition</strong><span>(uint _positionId, uint _price) </span><span>external </span></code><hr/><div class="description"><p>Update the price of an existing position.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_positionId</code> - Id of the position to update</div><div><code>_price</code> - Price the user wants to update the position to</div></dd></dl></div></div></li><li><div class="item function"><span id="withdraw" class="anchor-marker"></span><h4 class="name">withdraw</h4><div class="body"><code class="signature">function <strong>withdraw</strong><span>(uint _amount) </span><span>external </span></code><hr/><div class="description"><p>Withdraw.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_amount</code> - Amount to withdraw from user balance in smart contract to his account</div></dd></dl></div></div></li></ul></div></div></div>
